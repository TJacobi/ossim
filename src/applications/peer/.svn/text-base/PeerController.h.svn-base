#ifndef __CLIENTBEHAVIOR_H__
#define __CLIENTBEHAVIOR_H__

#include <omnetpp.h>
#include <clistener.h>
#include <list>

#include "OverlayManager.h"
#include "PeerBootstrap.h"
// Does not help to solve the error with parentModule()
// #include <cmodule.h>

//#include "TrackerApp.h"

//class OverlayManager;

/**
 * This module is responsible for controlling the Client's behavior: what content
 * to download, when to start downloading, how long should the seeding time be.
 */
class PeerController: public cListener, public cSimpleModule
{
// Overloading methods
public:
    //!@name cListener method
    //@{
    void receiveSignal(cComponent *source, simsignal_t signalID, long infoHash);
    //@}

public:
    PeerController();
    virtual ~PeerController();
    int getPeerId() const;

private:
    //! Print a debug message to clog.
    void printDebugMsg(std::string s);

protected:
//    int numInitStages() const;
//    virtual void initialize(int stage);
    virtual void initialize();
    virtual void handleMessage(cMessage *msg);

// Data members
private:
    int localPeerId;
    //! Set to true to print debug messages
    bool debugFlag;

// Messages
private:
//    cMessage *joinOverlay;

// Member objects
private:
    // For less dependency, use the module in the parent module (PeerApp) instead
    // OverlayManager *overlayManager; //!!!
    long int appID;
    static long int numPeer;
};

#endif
