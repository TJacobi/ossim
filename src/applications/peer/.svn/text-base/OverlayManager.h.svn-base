#ifndef __OVERLAYMANAGER_H__
#define __OVERLAYMANAGER_H__

#include <omnetpp.h>
#include <TCPSrvHostApp.h>
#include <TCPSocket.h>

#include <signal.h>



//#include "AnnounceRequestMsg_m.h"
//#include "AnnounceResponseMsg_m.h"

//class BitTorrentClient;
//class Choker;
////class ClientController;
////class ConnectedPeerManager;
//class ContentManager;
////class DataRateCollector;
//class SwarmManagerThread;
//class TorrentMetadata;

class OverlayManager: public TCPSrvHostApp
{
public:
    OverlayManager();
    virtual ~OverlayManager();
    void join();

private:
    void printDebugMsg(std::string s);

protected:
    void handleMessage(cMessage *msg);
    void initialize();
//    void initialize(int stage);
//    int numInitStages() const;

private:
    int localPeerId;
    //! True to print debug messages.
    bool debugFlag;
    //! The port opened for connection from other Peers
    int listenPort;

    TCPSocket socket;

    IPvXAddress trackerAddress;
    int trackerPort;
};

#endif
